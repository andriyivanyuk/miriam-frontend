---
import Header from "../../components/Header.astro";
import Footer from "../../components/Footer.astro";

const productId = Astro.params.id;
const apiUrl = `https://miriam-backend.onrender.com/api/products/${productId}?populate[product_type][populate]=*`;

let product = null;

try {
  const res = await fetch(apiUrl);
  const json = await res.json();
  product = json.data;
} catch (error) {
  console.error("Помилка при завантаженні продукту:", error);
}
---

<html lang="uk">
  <head>
    <meta charset="UTF-8" />
    <title>{product?.product_type?.[0]?.model_name ?? "Деталі товару"}</title>
    <base href="/" />

    <link
      href="https://fonts.googleapis.com/css?family=Poppins:400,500,600,700"
      rel="stylesheet"
    />

    <!-- Vendor CSS -->
    <link rel="stylesheet" href="/libs/bootstrap/css/bootstrap.min.css" />
    <link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css" />
    <link rel="stylesheet" href="/libs/nivo-slider/css/nivo-slider.css" />
    <link rel="stylesheet" href="/libs/nivo-slider/css/animate.css" />
    <link rel="stylesheet" href="/libs/nivo-slider/css/style.css" />
    <link
      rel="stylesheet"
      href="/libs/font-material/css/material-design-iconic-font.min.css"
    />
    <link rel="stylesheet" href="/libs/slider-range/css/jslider.css" />
    <link
      rel="stylesheet"
      href="/libs/owl-carousel/assets/owl.carousel.min.css"
    />

    <!-- Template CSS -->
    <link rel="stylesheet" type="text/css" href="/css/style.css" />
    <link rel="stylesheet" type="text/css" href="/css/reponsive.css" />
  </head>
  <body id="product-detail">
    <Header />
    <!-- <div class="main-content">
      <div class="container mt-5 mb-5">
        {
          product ? (
            <div class="row">
              <div class="col-md-6">
                <img
                  src={product.product_type?.[0]?.images?.[0]?.url}
                  class="img-fluid"
                  alt="Зображення товару"
                />
              </div>
              <div class="col-md-6">
                <h1>{product.product_type?.[0]?.model_name}</h1>
                <p>{product.product_type?.[0]?.furniture_description}</p>
                <p>
                  <strong>Ціна:</strong>{" "}
                  {product.product_type?.[0]?.basic_price} грн
                </p>
              </div>
            </div>
          ) : (
            <p>Товар не знайдено.</p>
          )
        }
      </div>
    </div> -->
    <div class="main-content">
      <div id="wrapper-site">
        <div id="content-wrapper">
          <div id="main">
            <div class="page-home">
              <!-- breadcrumb -->
              <nav class="breadcrumb-bg">
                <div class="container no-index">
                  <div class="breadcrumb">
                    <ol>
                      <li>
                        <a href="#">
                          <span>Home</span>
                        </a>
                      </li>
                      <li>
                        <a href="#">
                          <span>Living Room</span>
                        </a>
                      </li>
                      <li>
                        <a href="#">
                          <span>Sofa</span>
                        </a>
                      </li>
                    </ol>
                  </div>
                </div>
              </nav>
              <div class="container">
                <div class="content">
                  <div class="row">
                    <div class="col-sm-12 col-lg-12 col-md-12">
                      <div class="main-product-detail">
                        <h2>Lorem ipsum dolor</h2>
                        <div class="product-single row">
                          <div
                            class="product-detail col-xs-12 col-md-5 col-sm-5"
                          >
                            <div class="page-content" id="content">
                              <div class="images-container">
                                <div class="js-qv-mask mask tab-content border">
                                  <div
                                    id="item1"
                                    class="tab-pane fade active in show"
                                  >
                                    <img src="img/product/1.jpg" alt="img" />
                                  </div>
                                  <div id="item2" class="tab-pane fade">
                                    <img src="img/product/2.jpg" alt="img" />
                                  </div>
                                  <div id="item3" class="tab-pane fade">
                                    <img src="img/product/3.jpg" alt="img" />
                                  </div>
                                  <div id="item4" class="tab-pane fade">
                                    <img src="img/product/5.jpg" alt="img" />
                                  </div>
                                  <div
                                    class="layer hidden-sm-down"
                                    data-toggle="modal"
                                    data-target="#product-modal"
                                  >
                                    <i class="fa fa-expand"></i>
                                  </div>
                                </div>
                                <ul class="product-tab nav nav-tabs d-flex">
                                  <li class="active col">
                                    <a
                                      href="#item1"
                                      data-toggle="tab"
                                      aria-expanded="true"
                                      class="active show"
                                    >
                                      <img src="img/product/1.jpg" alt="img" />
                                    </a>
                                  </li>
                                  <li class="col">
                                    <a href="#item2" data-toggle="tab">
                                      <img src="img/product/2.jpg" alt="img" />
                                    </a>
                                  </li>
                                  <li class="col">
                                    <a href="#item3" data-toggle="tab">
                                      <img src="img/product/3.jpg" alt="img" />
                                    </a>
                                  </li>
                                  <li class="col">
                                    <a href="#item4" data-toggle="tab">
                                      <img src="img/product/5.jpg" alt="img" />
                                    </a>
                                  </li>
                                </ul>
                                <div
                                  class="modal fade"
                                  id="product-modal"
                                  role="dialog"
                                >
                                  <div class="modal-dialog">
                                    <!-- Modal content-->
                                    <div class="modal-content">
                                      <div class="modal-header">
                                        <div class="modal-body">
                                          <div class="product-detail">
                                            <div>
                                              <div class="images-container">
                                                <div
                                                  class="js-qv-mask mask tab-content"
                                                >
                                                  <div
                                                    id="modal-item1"
                                                    class="tab-pane fade active in show"
                                                  >
                                                    <img
                                                      src="img/product/1.jpg"
                                                      alt="img"
                                                    />
                                                  </div>
                                                  <div
                                                    id="modal-item2"
                                                    class="tab-pane fade"
                                                  >
                                                    <img
                                                      src="img/product/2.jpg"
                                                      alt="img"
                                                    />
                                                  </div>
                                                  <div
                                                    id="modal-item3"
                                                    class="tab-pane fade"
                                                  >
                                                    <img
                                                      src="img/product/3.jpg"
                                                      alt="img"
                                                    />
                                                  </div>
                                                  <div
                                                    id="modal-item4"
                                                    class="tab-pane fade"
                                                  >
                                                    <img
                                                      src="img/product/5.jpg"
                                                      alt="img"
                                                    />
                                                  </div>
                                                </div>
                                                <ul
                                                  class="product-tab nav nav-tabs"
                                                >
                                                  <li class="active">
                                                    <a
                                                      href="#modal-item1"
                                                      data-toggle="tab"
                                                      class="active show"
                                                    >
                                                      <img
                                                        src="img/product/1.jpg"
                                                        alt="img"
                                                      />
                                                    </a>
                                                  </li>
                                                  <li>
                                                    <a
                                                      href="#modal-item2"
                                                      data-toggle="tab"
                                                    >
                                                      <img
                                                        src="img/product/2.jpg"
                                                        alt="img"
                                                      />
                                                    </a>
                                                  </li>
                                                  <li>
                                                    <a
                                                      href="#modal-item3"
                                                      data-toggle="tab"
                                                    >
                                                      <img
                                                        src="img/product/3.jpg"
                                                        alt="img"
                                                      />
                                                    </a>
                                                  </li>
                                                  <li>
                                                    <a
                                                      href="#modal-item4"
                                                      data-toggle="tab"
                                                    >
                                                      <img
                                                        src="img/product/5.jpg"
                                                        alt="img"
                                                      />
                                                    </a>
                                                  </li>
                                                </ul>
                                              </div>
                                            </div>
                                          </div>
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                          <div class="product-info col-xs-12 col-md-7 col-sm-7">
                            <div class="detail-description">
                              <div class="price-del">
                                <span class="price">£150.00</span>
                                <span class="float-right">
                                  <span class="availb">Availability: </span>
                                  <span class="check">
                                    <i
                                      class="fa fa-check-square-o"
                                      aria-hidden="true"></i>IN STOCK</span
                                  >
                                </span>
                              </div>
                              <p class="description">
                                Proin gravida nibh vel velit auctor aliquet.
                                Aenean lorem quis bibendum auctor, nisi elit
                                consequat etiam non auctor.
                              </p>
                              <div
                                class="option has-border d-lg-flex size-color"
                              >
                                <div class="size">
                                  <span class="size">size :</span>
                                  <select>
                                    <option value="">Choose your size</option>
                                    <option value="">M</option>
                                    <option value="">l</option>
                                    <option value="">xl</option>
                                  </select>
                                </div>
                                <div class="colors">
                                  <b class="title">Color : </b>
                                  <span class="blue"></span>
                                  <span class="yellow"></span>
                                  <span class="pink"></span>
                                  <span class="green"></span>
                                  <span class="brown"></span>
                                  <span class="red"></span>
                                </div>
                              </div>
                              <div class="has-border cart-area">
                                <div class="product-quantity">
                                  <div class="qty">
                                    <div class="input-group">
                                      <div class="quantity">
                                        <span class="control-label"
                                          >QTY :
                                        </span>
                                        <input
                                          type="text"
                                          name="qty"
                                          id="quantity_wanted"
                                          value="1"
                                          class="input-group form-control"
                                        />

                                        <span class="input-group-btn-vertical">
                                          <button
                                            class="btn btn-touchspin js-touchspin bootstrap-touchspin-up"
                                            type="button"
                                          >
                                            +
                                          </button>
                                          <button
                                            class="btn btn-touchspin js-touchspin bootstrap-touchspin-down"
                                            type="button"
                                          >
                                            -
                                          </button>
                                        </span>
                                      </div>
                                      <span class="add">
                                        <button
                                          class="btn btn-primary add-to-cart add-item"
                                          data-button-action="add-to-cart"
                                          type="submit"
                                        >
                                          <i
                                            class="fa fa-shopping-cart"
                                            aria-hidden="true"></i>
                                          <span>Add to cart</span>
                                        </button>
                                        <a class="addToWishlist" href="#">
                                          <i
                                            class="fa fa-heart"
                                            aria-hidden="true"></i>
                                        </a>
                                      </span>
                                    </div>
                                  </div>
                                </div>
                                <div class="clearfix"></div>
                                <p class="product-minimal-quantity"></p>
                              </div>
                              <div class="d-flex2 has-border">
                                <div class="btn-group">
                                  <a href="#">
                                    <i class="zmdi zmdi-share"></i>
                                    <span>Share</span>
                                  </a>
                                  <a href="#" class="email">
                                    <i class="fa fa-envelope" aria-hidden="true"
                                    ></i>
                                    <span>SEN TO A FRIEND</span>
                                  </a>
                                  <a href="#" class="print">
                                    <i class="zmdi zmdi-print"></i>
                                    <span>Print</span>
                                  </a>
                                </div>
                              </div>
                              <div class="rating-comment has-border d-flex">
                                <div class="review-description d-flex">
                                  <span>REVIEW :</span>
                                  <div class="rating">
                                    <div class="star-content">
                                      <div class="star"></div>
                                      <div class="star"></div>
                                      <div class="star"></div>
                                      <div class="star"></div>
                                      <div class="star"></div>
                                    </div>
                                  </div>
                                </div>
                                <div class="read after-has-border">
                                  <a href="#review">
                                    <i
                                      class="fa fa-commenting-o color"
                                      aria-hidden="true"></i>
                                    <span>READ REVIEWS (3)</span>
                                  </a>
                                </div>
                                <div class="apen after-has-border">
                                  <a href="#review">
                                    <i
                                      class="fa fa-pencil color"
                                      aria-hidden="true"></i>
                                    <span>WRITE A REVIEW</span>
                                  </a>
                                </div>
                              </div>
                              <div class="content">
                                <p>
                                  SKU :
                                  <span class="content2">
                                    <a href="#">e-02154</a>
                                  </span>
                                </p>
                                <p>
                                  Categories :
                                  <span class="content2">
                                    <a href="#">Clothing</a>,
                                    <a href="#">Men's Jackets</a>
                                  </span>
                                </p>
                                <p>
                                  tags :
                                  <span class="content2">
                                    <a href="#">Jacket</a>,
                                    <a href="#">Overcoat</a>,
                                    <a href="#">Luxury</a>,
                                    <a href="#">men</a>,
                                    <a href="#">summer</a>,
                                    <a href="#">autumn</a>
                                  </span>
                                </p>
                              </div>
                            </div>
                          </div>
                        </div>

                        <div class="review">
                          <ul class="nav nav-tabs">
                            <li class="active">
                              <a
                                data-toggle="tab"
                                href="#description"
                                class="active show">Description</a
                              >
                            </li>
                          </ul>

                          <div class="tab-content">
                            <div
                              id="description"
                              class="tab-pane fade in active show"
                            >
                              <p>
                                Lorem ipsum dolor sit amet, consectetur
                                adipisicing elit, sed do eiusmod tempor
                                incididunt ut labore et dolore magna
                                aliqua.Lorem ipsum dolor sit amet, consectetur
                                adipisicing elit, sed do eiusmod tempor
                                incididunt ut labore et dolore magna aliqua.
                              </p>
                              <p>
                                Lorem ipsum dolor sit amet, consectetur
                                adipisicing elit, sed do eiusmod tempor
                                incididunt ut labore et dolore magna
                                aliqua.Lorem ipsum dolor sit amet, consectetur
                                adipisicing elit, sed do eiusmod tempor
                                incididunt ut labore et dolore magna aliqua.
                              </p>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <Footer />

    <!-- Vendor JS -->
    <script src="/libs/jquery/jquery.min.js" is:inline></script>
    <script src="/libs/popper/popper.min.js" is:inline></script>
    <script src="/libs/bootstrap/js/bootstrap.min.js" is:inline></script>
    <script src="/libs/nivo-slider/js/jquery.nivo.slider.js" is:inline></script>
    <script src="/libs/owl-carousel/owl.carousel.min.js" is:inline></script>
    <script src="/libs/slider-range/js/tmpl.js" is:inline></script>
    <script src="/libs/slider-range/js/jquery.dependClass-0.1.js" is:inline
    ></script>
    <script src="/libs/slider-range/js/draggable-0.1.js" is:inline></script>
    <script src="/libs/slider-range/js/jquery.slider.js" is:inline></script>

    <!-- Template JS -->
    <script src="/js/theme.js" is:inline></script>
  </body>
</html>
